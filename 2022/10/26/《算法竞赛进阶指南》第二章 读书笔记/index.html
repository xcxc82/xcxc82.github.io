<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>《算法竞赛进阶指南》第二章 读书笔记 | xcxc82</title><meta name="keywords" content="学习笔记"><meta name="author" content="xcxc82"><meta name="copyright" content="xcxc82"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="一章的文本量太大了...还是分开写吧">
<meta property="og:type" content="article">
<meta property="og:title" content="《算法竞赛进阶指南》第二章 读书笔记">
<meta property="og:url" content="http://example.com/2022/10/26/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="xcxc82">
<meta property="og:description" content="一章的文本量太大了...还是分开写吧">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2022-10-26T12:13:56.000Z">
<meta property="article:modified_time" content="2022-11-09T13:36:39.699Z">
<meta property="article:author" content="xcxc82">
<meta property="article:tag" content="学习笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/10/26/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":40,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《算法竞赛进阶指南》第二章 读书笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-09 21:36:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.luogu.com.cn/upload/image_hosting/9z8l8un7.png" onerror="onerror=null;src='null'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">xcxc82</a><div id="tp-weather-widget"></div></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">《算法竞赛进阶指南》第二章 读书笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-26T12:13:56.000Z" title="发表于 2022-10-26 20:13:56">2022-10-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-09T13:36:39.699Z" title="更新于 2022-11-09 21:36:39">2022-11-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ACM/">ACM</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span id="" data-flag-title="《算法竞赛进阶指南》第二章 读书笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="waline-pageview-count" data-path="/2022/10/26/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><ul>
<li><p><del>是可爱的数据结构!</del></p>
</li>
<li><p>竞赛复健,自用向整理</p>
</li>
<li>为简约文本,代码均省略开头部分</li>
<li>书中所有例题均在acwing上可以找到</li>
</ul>
<h3 id="0x10-基本数据结构"><a href="#0x10-基本数据结构" class="headerlink" title="0x10 基本数据结构"></a>0x10 基本数据结构</h3><h4 id="0x11-栈"><a href="#0x11-栈" class="headerlink" title="0x11 栈"></a>0x11 栈</h4><ul>
<li><p>例题: Push,Pop,GetMin</p>
<ul>
<li><p>开一个大根堆和一个栈,模拟操作,当栈被弹出的值与大根堆堆顶值相同时,弹出大根堆堆顶即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MinStack</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> s[<span class="number">110</span>];</span><br><span class="line">    <span class="type">int</span> Top = <span class="number">0</span>;</span><br><span class="line">    priority_queue&lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; q;</span><br><span class="line">    <span class="built_in">MinStack</span>() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        s[++Top] = x;</span><br><span class="line">        q.<span class="built_in">push</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span>(q.<span class="built_in">top</span>()==s[Top]) q.<span class="built_in">pop</span>();</span><br><span class="line">        Top--;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> s[Top];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getMin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> q.<span class="built_in">top</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 编辑器</p>
<ul>
<li><p>开两个栈来模拟左右移动的操作,并记录以$i$为结尾的最大值和前缀和,每次有新值插入光标后时,更新最大值和前缀和即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[MAXN],MAX[MAXN],n,top,k,b[MAXN],top2,sum[MAXN];</span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">	a[++top] = k;</span><br><span class="line">	sum[top] = sum[top<span class="number">-1</span>]+a[top];</span><br><span class="line">	MAX[top] = <span class="built_in">max</span>(MAX[top<span class="number">-1</span>],sum[top]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!top) <span class="keyword">return</span>; </span><br><span class="line">	MAX[top] = <span class="number">-11451419</span>;</span><br><span class="line">	top--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move_L</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(top==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">	b[++top2] = a[top--];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">move_R</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(top2==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">	a[++top] = b[top2--];</span><br><span class="line">	sum[top] = sum[top<span class="number">-1</span>]+a[top];</span><br><span class="line">	MAX[top] = <span class="built_in">max</span>(MAX[top<span class="number">-1</span>],sum[top]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query_max</span><span class="params">(<span class="type">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> MAX[k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 火车进栈</p>
<ul>
<li><p>搜索一下即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[MAXN],n,top,b[MAXN],T,cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> now)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(now==n+<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(cnt==<span class="number">20</span>) <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">		cnt++;</span><br><span class="line">		<span class="built_in">print</span>();</span><br><span class="line">		<span class="keyword">return</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(top)&#123;</span><br><span class="line">		b[++T] = a[top--];</span><br><span class="line">		<span class="built_in">dfs</span>(now);</span><br><span class="line">		a[++top] = b[T--];</span><br><span class="line">	&#125;</span><br><span class="line">		a[++top] = now;</span><br><span class="line">		<span class="built_in">dfs</span>(now+<span class="number">1</span>);</span><br><span class="line">		top--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 火车进出栈问题</p>
<ul>
<li><p>方法1: 设$f<em>i$表示有$i$个数进栈时的方案数,我们假设第一个数在出栈时排在第$i$个数,有递推式$\sum\limits</em>{i = 1}^{n-1}(f<em>{i-1}×f</em>{n-i})$,会T</p>
</li>
<li><p>方法2: dp。设$f<em>{i,j}$表示有$i$个数未入栈,有$j$个数在栈中的方案数,有递推式$f</em>{i,j} = f<em>{i-1,j+1}+f</em>{i,j-1}$,复杂度$O(n^2)$,会T</p>
</li>
<li><p>方法3: 卡特兰数。经典问题了,用通项公式求一下卡特兰数就行,要写高精度</p>
<p><del>你说得对,但是python可以不用写高精度</del></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">A = math.factorial(<span class="number">2</span> * n)</span><br><span class="line">B = math.factorial(n)</span><br><span class="line"><span class="built_in">print</span>(A // B // B // (n + <span class="number">1</span>))</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>表达式计算</p>
<ul>
<li><p>中缀表达式: 最常见的表达式,形如$A$  $op$  $B$,其中$op$是操作符</p>
</li>
<li><p>后缀表达式: 又称逆波兰式,形如$1$  $2$  $op$,计算流程就是遇到数字把数字压入栈中,遇到计算符把栈头两个元素弹出进行计算,后再将新值压入栈中</p>
</li>
<li><p>前缀表达式: 又称波兰式,形如 $op$  $1$  $2$,计算流程同理后缀表达式,只是从后往前扫描</p>
</li>
<li><p>中缀表达式转后缀表达式:</p>
<ul>
<li><p>1.建立一个用于存储运算符的栈,扫描中缀表达式中的每个值:</p>
<p>(1).遇到数字,输出该数。</p>
<p>(2).遇到左括号,把左括号入栈</p>
<p>(3).遇到右括号,不断取出栈顶并输出,直到栈顶为左括号,然后把左括号出栈</p>
<p>(4).如果遇到运算符,只要把栈顶符号的优先级不低于新符号,就不断取出栈顶并输出,最后把新符号进栈。优先级为乘除$&gt;$加减$&gt;$左括号</p>
</li>
<li><p>2.最后依次取出栈中剩余值并输出,最终输出序列就是一个与原中缀表达式等价的后缀表达式</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Calc_RevPolish</span><span class="params">()</span></span>&#123;<span class="comment">//后缀表达式计算</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		c = s[i];</span><br><span class="line">		<span class="keyword">if</span>(c&gt;<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;<span class="string">&#x27;9&#x27;</span>) a[++top] = c - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;-&#x27;</span>) x = a[top--],y = a[top--],a[++top] = y-x;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;+&#x27;</span>) x = a[top--],y = a[top--],a[++top] = y+x;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;*&#x27;</span>) x = a[top--],y = a[top--],a[++top] = y*x;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="string">&#x27;/&#x27;</span>) x = a[top--],y = a[top--],a[++top] = y/x;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;a[top--];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 表达式计算4</p>
<ul>
<li><p>把中缀表达式转化为后缀表达式后计算即可。注意,这里会出现负数的情况,需要把负数$-a$转化为$(0-a)$后再进行计算</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> s[MAXN],ans[MAXN];</span><br><span class="line"><span class="type">int</span> a[MAXN];</span><br><span class="line"><span class="type">int</span> top,maxc[<span class="number">610</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f_pow</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(b)&#123;</span><br><span class="line">		<span class="keyword">if</span>(b&amp;<span class="number">1</span>) res = res*a;</span><br><span class="line">		b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">		a*=a;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">infix_to_RevPolish</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="type">char</span> a[MAXN],t = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> x,y;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(s[i]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[i]&lt;=<span class="string">&#x27;9&#x27;</span>) ans[++top] = s[i];</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(s[i<span class="number">-1</span>]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[i<span class="number">-1</span>]&lt;=<span class="string">&#x27;9&#x27;</span>) ans[++top] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">			<span class="keyword">if</span>(s[i]==<span class="string">&#x27;(&#x27;</span>) a[++t] = s[i];</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(s[i]==<span class="string">&#x27;)&#x27;</span>)&#123;</span><br><span class="line">				<span class="keyword">while</span>(a[t]!=<span class="string">&#x27;(&#x27;</span>) ans[++top] = a[t--];</span><br><span class="line">				t--;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">while</span>(maxc[a[t]]&gt;=maxc[s[i]]&amp;&amp;t)</span><br><span class="line">					ans[++top] = a[t--];</span><br><span class="line">				a[++t] = s[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(s[n]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[n]&lt;=<span class="string">&#x27;9&#x27;</span>) ans[++top] = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">	<span class="keyword">while</span>(t) ans[++top] = a[t--];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">calc_RevPolish</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> Top = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> res = <span class="number">0</span>,x,y;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=top;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;(&#x27;</span>||ans[i]==<span class="string">&#x27;)&#x27;</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;ans[i]&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">			res = res*<span class="number">10</span>+ans[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;#&#x27;</span>) a[++Top] = res,res = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;+&#x27;</span>) x = a[Top--],y = a[Top--],a[++Top] = y+x;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;-&#x27;</span>) x = a[Top--],y = a[Top--],a[++Top] = y-x;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;*&#x27;</span>) x = a[Top--],y = a[Top--],a[++Top] = y*x;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;/&#x27;</span>) x = a[Top--],y = a[Top--],a[++Top] = y/x;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==<span class="string">&#x27;^&#x27;</span>) x = a[Top--],y = a[Top--],a[++Top] = <span class="built_in">f_pow</span>(y,x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(a[Top]==<span class="number">0</span>) cout&lt;&lt;<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> cout&lt;&lt;a[Top];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	maxc[<span class="built_in">int</span>(<span class="string">&#x27;+&#x27;</span>)] = maxc[<span class="built_in">int</span>(<span class="string">&#x27;-&#x27;</span>)] = <span class="number">1</span>;</span><br><span class="line">	maxc[<span class="built_in">int</span>(<span class="string">&#x27;*&#x27;</span>)] = maxc[<span class="built_in">int</span>(<span class="string">&#x27;/&#x27;</span>)] = <span class="number">2</span>;</span><br><span class="line">	maxc[<span class="built_in">int</span>(<span class="string">&#x27;^&#x27;</span>)] = <span class="number">3</span>;</span><br><span class="line">	cin&gt;&gt;(s+<span class="number">1</span>);</span><br><span class="line">	<span class="built_in">infix_to_RevPolish</span>(<span class="built_in">strlen</span>(s+<span class="number">1</span>));</span><br><span class="line">	<span class="built_in">calc_RevPolish</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>单调栈</p>
<p>一种用于及时排除无用选择,保持决策集合高度有效性和秩序性的数据结构</p>
<p>例题: 直方图中最大的矩形</p>
<ul>
<li><p>显然,如果下一个矩形比上一个小,那么该矩形利用之前的矩形一起构成一块较大的面积时,这块面积的高度就不可能超过该矩形自己的高度。因此,我们可以建立一个栈,维护若干个单调递增的矩形,并在维护的同时求出其贡献值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">	<span class="built_in">memset</span>(w,<span class="number">0</span>,<span class="built_in">sizeof</span>(w));</span><br><span class="line">	ans = <span class="number">0</span>;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">if</span>(!n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i] = <span class="built_in">read</span>();</span><br><span class="line">	top = <span class="number">0</span>;</span><br><span class="line">	s[++top] = a[<span class="number">1</span>],w[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">	a[n+<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n+<span class="number">1</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(a[i]&gt;=s[top]) s[++top] = a[i],w[top] = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="type">int</span> W = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span>(s[top]&gt;a[i]&amp;&amp;top)&#123;</span><br><span class="line">				W+=w[top];</span><br><span class="line">				ans = <span class="built_in">max</span>(ans,W*s[top]);</span><br><span class="line">				top--;</span><br><span class="line">			&#125;</span><br><span class="line">			s[++top] = a[i],w[top] = W+<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="0x12-队列"><a href="#0x12-队列" class="headerlink" title="0x12 队列"></a>0x12 队列</h4><ul>
<li><p>例题: 小组队列</p>
<ul>
<li><p>开个队列数组后模拟操作即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> T,n,a,cnt[<span class="number">1000010</span>],End,id[MAXN],k,ans;</span><br><span class="line">string s;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(id,<span class="number">0</span>,<span class="built_in">sizeof</span>(id));</span><br><span class="line">		End = <span class="number">0</span>;</span><br><span class="line">		queue&lt;<span class="type">int</span>&gt; q[MAXN];</span><br><span class="line">		k++;</span><br><span class="line">		cin&gt;&gt;T;</span><br><span class="line">		<span class="keyword">if</span>(T==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=T;i++)&#123;</span><br><span class="line">			cin&gt;&gt;n;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">				cin&gt;&gt;a;</span><br><span class="line">				cnt[a] = i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;<span class="string">&quot;Scenario #&quot;</span>&lt;&lt;k&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">while</span>(cin&gt;&gt;s)&#123;</span><br><span class="line">			<span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">&#x27;E&#x27;</span>)&#123;</span><br><span class="line">				cin&gt;&gt;a;</span><br><span class="line">				<span class="keyword">if</span>(q[id[cnt[a]]].<span class="built_in">size</span>()) q[id[cnt[a]]].<span class="built_in">push</span>(a);</span><br><span class="line">				<span class="keyword">else</span>&#123;</span><br><span class="line">					q[++End].<span class="built_in">push</span>(a);</span><br><span class="line">					id[cnt[a]] = End;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">&#x27;D&#x27;</span>)&#123;</span><br><span class="line">				<span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">while</span>(!q[i].<span class="built_in">size</span>()) i++;</span><br><span class="line">				cout&lt;&lt;q[i].<span class="built_in">front</span>()&lt;&lt;endl;</span><br><span class="line">				q[i].<span class="built_in">pop</span>();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 蚯蚓</p>
<ul>
<li><p>也算是经典老题了。之前写的题解:<a target="_blank" rel="noopener" href="https://xcxc82.github.io/2020/10/05/p2827/">P2827 蚯蚓</a> (yysy现在再回头看自己之前写的一些题解发现写的是真的烂。。。)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">queue&lt;<span class="type">int</span>&gt; q1,q2,q3;</span><br><span class="line"><span class="type">int</span> MAX,l,r,val;</span><br><span class="line"><span class="type">int</span> n,m,q,u,v,t,a[MAXN];</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	n = <span class="built_in">raed</span>(),m = <span class="built_in">read</span>(),q = <span class="built_in">read</span>(),u = <span class="built_in">raed</span>(),v = <span class="built_in">read</span>(),t = <span class="built_in">raed</span>();</span><br><span class="line">	<span class="type">double</span> p = (<span class="type">double</span>)u/v;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i] = <span class="built_in">read</span>(),a[i] = -a[i];</span><br><span class="line">	<span class="built_in">sort</span>(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) q1.<span class="built_in">push</span>(-a[i]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		<span class="type">int</span> MAX = <span class="number">-1e9</span>;</span><br><span class="line">		<span class="keyword">if</span>(!q1.<span class="built_in">empty</span>()) MAX = <span class="built_in">max</span>(MAX,q1.<span class="built_in">front</span>());</span><br><span class="line">		<span class="keyword">if</span>(!q2.<span class="built_in">empty</span>()) MAX = <span class="built_in">max</span>(MAX,q2.<span class="built_in">front</span>());</span><br><span class="line">		<span class="keyword">if</span>(!q3.<span class="built_in">empty</span>()) MAX = <span class="built_in">max</span>(MAX,q3.<span class="built_in">front</span>());</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(!q1.<span class="built_in">empty</span>()&amp;&amp;MAX==q1.<span class="built_in">front</span>()) q1.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!q2.<span class="built_in">empty</span>()&amp;&amp;MAX==q2.<span class="built_in">front</span>()) q2.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!q3.<span class="built_in">empty</span>()&amp;&amp;MAX==q3.<span class="built_in">front</span>()) q3.<span class="built_in">pop</span>();</span><br><span class="line">		MAX+=q*(i<span class="number">-1</span>);</span><br><span class="line">		<span class="type">int</span> L = (<span class="type">double</span>)(p*MAX),R =  MAX - L;</span><br><span class="line">		q2.<span class="built_in">push</span>(L-q*i),q3.<span class="built_in">push</span>(R-q*i);</span><br><span class="line">		<span class="keyword">if</span>(i%t==<span class="number">0</span>) cout&lt;&lt;MAX&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;endl;</span><br><span class="line">	<span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="type">int</span> MAX = <span class="number">-1e9</span>;</span><br><span class="line">		<span class="keyword">if</span>(!q1.<span class="built_in">empty</span>()) MAX = <span class="built_in">max</span>(MAX,q1.<span class="built_in">front</span>());</span><br><span class="line">		<span class="keyword">if</span>(!q2.<span class="built_in">empty</span>()) MAX = <span class="built_in">max</span>(MAX,q2.<span class="built_in">front</span>());</span><br><span class="line">		<span class="keyword">if</span>(!q3.<span class="built_in">empty</span>()) MAX = <span class="built_in">max</span>(MAX,q3.<span class="built_in">front</span>());</span><br><span class="line">		<span class="keyword">if</span>(!q1.<span class="built_in">empty</span>()&amp;&amp;MAX==q1.<span class="built_in">front</span>()) q1.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!q2.<span class="built_in">empty</span>()&amp;&amp;MAX==q2.<span class="built_in">front</span>()) q2.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!q3.<span class="built_in">empty</span>()&amp;&amp;MAX==q3.<span class="built_in">front</span>()) q3.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">if</span>(MAX==<span class="number">-1e9</span>) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">if</span>(i%t==<span class="number">0</span>) cout&lt;&lt;MAX+q*m&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>例题: 双端队列</p>
<ul>
<li><p>考虑将原序列$a$进行排序,划分为若干个”队列区间”来处理。对于每个”队列区间”,其包含的数字下标在原序列中一定是成”山谷”状(先递减后递增) 的,因此,若没有相同的数字,只需要统计”山谷”的数量即可。</p>
</li>
<li><p>再来看有相同的数时的情况。排序后,对于区间$[l,r]$内相同的数字,其顺序可以任意替换,考虑将相同的数划分为若干个区间来处理。贪心的考虑,对于每个区间,若其能连上前一个”队列区间”,就将其合并进去,否则,新建一个”队列区间”</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Nums</span>&#123;</span><br><span class="line">	<span class="type">int</span> id,v;</span><br><span class="line">&#125;a[MAXN];</span><br><span class="line"><span class="type">int</span> l[MAXN],r[MAXN],tot,ans = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> MIN[MAXN],MAX[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(Nums a,Nums b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.v&lt;b.v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(MIN,<span class="number">0x3f</span>,<span class="built_in">sizeof</span>(MIN));</span><br><span class="line">	n = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i].v = <span class="built_in">raed</span>(),a[i].id = i;</span><br><span class="line">	<span class="built_in">sort</span>(a+<span class="number">1</span>,a+n+<span class="number">1</span>,cmp);</span><br><span class="line">	l[++tot] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(a[i].v!=a[i<span class="number">-1</span>].v) r[tot] = i<span class="number">-1</span>,l[++tot] = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=tot;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=l[i];j&lt;=r[i];j++)&#123;</span><br><span class="line">			MIN[i] = <span class="built_in">min</span>(MIN[i],a[j].id);</span><br><span class="line">			MAX[i] = <span class="built_in">max</span>(MAX[i],a[j].id);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">bool</span> rev = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> now = MIN[<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=tot;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(!rev&amp;&amp;MAX[i]&lt;now) now = MIN[i];</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(!rev&amp;&amp;MAX[i]&gt;now) rev = <span class="number">1</span>,now = MAX[i];</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(rev&amp;&amp;MIN[i]&gt;now) now = MAX[i];</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			ans++;</span><br><span class="line">			now = MIN[i];</span><br><span class="line">			rev = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>单调队列</p>
<center>$如果一位选手比你小,还比你强,那你就打不过他了$</center>



</li>
</ul>
<p>  思想同理单调栈,及时排除决策集合(队列)中一定不是最优解的值</p>
<p>  例题: 最大子段和</p>
<ul>
<li><p>设前前缀和为$sum_i$,有转移$f_i = sum_i - min{ sum_j }(i-j+1≤m)$</p>
<p>对于两个选择$sum_j$和$sum_k$$(j&lt;k)$,若$sum_k&lt;sum_j$,显然选$k$比选$j$更优,且$k$位更容易满足长度不超过$m$的条件,因此,$j$位永远不会成为最优选项,可以提前排除掉。我们只需维护一个满足$sum$单调递增的队列,即可在$O(n)$的复杂度内解决该问题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="built_in">read</span>(),m = <span class="built_in">raed</span>();</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i] = <span class="built_in">raed</span>(),sum[i] = sum[i<span class="number">-1</span>]+a[i];</span><br><span class="line">q[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">	<span class="keyword">while</span>(l&lt;=r&amp;&amp;q[l]&lt;i-m) l++;</span><br><span class="line">	ans = <span class="built_in">max</span>(ans,sum[i] - sum[q[l]]);</span><br><span class="line">	<span class="keyword">while</span>(l&lt;=r&amp;&amp;sum[q[r]]&gt;sum[i]) r--;</span><br><span class="line">	q[++r] = i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="0x13-链表与邻接表"><a href="#0x13-链表与邻接表" class="headerlink" title="0x13 链表与邻接表"></a>0x13 链表与邻接表</h4><ul>
<li><p>链表模板:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> head,tail,tot; </span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	<span class="type">int</span> value,next,prev;</span><br><span class="line">&#125;a[MAXN];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	tot = <span class="number">2</span>;</span><br><span class="line">	head = <span class="number">1</span>,tail = <span class="number">2</span>;</span><br><span class="line">	a[<span class="number">1</span>].next = <span class="number">2</span>;</span><br><span class="line">	a[<span class="number">2</span>].prev = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> value,<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> now = ++tot;</span><br><span class="line">	a[now] = value;</span><br><span class="line">	a[a[x].next].prev = now;</span><br><span class="line">	a[now].next = a[x].next;</span><br><span class="line">	a[x].next = now;</span><br><span class="line">	a[now].prev = x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Delete</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	a[a[x].next].prev = a[x].prev;</span><br><span class="line">	a[a[x].prev].next = a[x].next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="built_in">sizeof</span>(a));</span><br><span class="line">	tot = head = tail = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>例题: 邻值查找</p>
<ul>
<li><p>此题是让我们查询每个数的前驱和后继,我们只需要将原序列排序后组成一个链表,并对于原序列倒序处理,每次查询该数的前驱和后继,并在链表中删除该数即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,c[MAXN];</span><br><span class="line"><span class="type">int</span> head,tail,tot;</span><br><span class="line"><span class="type">int</span> ans[MAXN],Index[MAXN];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	<span class="type">int</span> prev,next,val,id;</span><br><span class="line">&#125;a[MAXN];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Value</span>&#123;</span><br><span class="line">	<span class="type">int</span> ind,v;</span><br><span class="line">&#125;b[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Cmp</span><span class="params">(Value a,Value b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a.v==b.v) <span class="keyword">return</span> a.ind&gt;b.ind;</span><br><span class="line">	<span class="keyword">return</span> a.v&lt;b.v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	tot = <span class="number">2</span>;</span><br><span class="line">	head = <span class="number">1</span>,tail = <span class="number">2</span>;</span><br><span class="line">	a[<span class="number">1</span>].next = tail;</span><br><span class="line">	a[<span class="number">2</span>].prev = head;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> p,<span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">	a[++tot].val = v;</span><br><span class="line">	a[tot].id = tot<span class="number">-2</span>;</span><br><span class="line">	a[a[p].next].prev = tot;</span><br><span class="line">	a[tot].next = a[p].next;</span><br><span class="line">	a[tot].prev = p;</span><br><span class="line">	a[p].next = tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Delete</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line">	a[a[p].next].prev = a[p].prev;</span><br><span class="line">	a[a[p].prev].next = a[p].next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Pre</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a[p].prev!=<span class="number">1</span>) <span class="keyword">return</span> a[a[p].prev].val;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1e9</span>+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Nxt</span><span class="params">(<span class="type">int</span> p)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a[p].next!=<span class="number">2</span>) <span class="keyword">return</span> a[a[p].next].val;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1e9</span>+<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">Init</span>();</span><br><span class="line">	n = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) b[i].v = <span class="built_in">read</span>(),b[i].ind = i;</span><br><span class="line">	<span class="built_in">sort</span>(b+<span class="number">1</span>,b+n+<span class="number">1</span>,Cmp);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) c[b[i].ind] = i;</span><br><span class="line">	<span class="built_in">Insert</span>(<span class="number">1</span>,b[<span class="number">1</span>].v);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++) <span class="built_in">Insert</span>(i+<span class="number">1</span>,b[i].v);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">2</span>;i--)&#123;</span><br><span class="line">		<span class="type">int</span> now = c[i]+<span class="number">2</span>;</span><br><span class="line">		<span class="type">int</span> P_id = a[a[now].prev].id,N_id = a[a[now].next].id;</span><br><span class="line">		<span class="type">int</span> pre = <span class="built_in">Pre</span>(now),nxt = <span class="built_in">Nxt</span>(now);</span><br><span class="line">		<span class="keyword">if</span>(pre==<span class="number">1e9</span>+<span class="number">10</span>) ans[i] = <span class="built_in">abs</span>(a[now].val - nxt),Index[i] = b[N_id].ind;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(nxt==<span class="number">1e9</span>+<span class="number">10</span>) ans[i] = <span class="built_in">abs</span>(a[now].val - pre),Index[i] = b[P_id].ind;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">abs</span>(a[now].val-nxt)&lt;<span class="built_in">abs</span>(a[now].val-pre))&#123;</span><br><span class="line">				ans[i] = <span class="built_in">abs</span>(a[now].val - nxt),Index[i] = b[N_id].ind;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				ans[i] = <span class="built_in">abs</span>(a[now].val - pre),Index[i] = b[P_id].ind;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">Delete</span>(now);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,ans[i],Index[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>邻接表&amp;&amp;链式前向星:</p>
<ul>
<li><p>本质上是”带有索引数组的多个数据链表”。是树与图的一般存储方式,其结构见下图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://pic.jitudisk.com/public/2022/11/07/f3d2c65968c40.png" alt=""></p>
</li>
<li><p>上图中,$head_u$就是每个节点的”索引数组”,每次连接新边时,将其插入到对应链表头部。</p>
</li>
<li><p>邻接表的实现通常采用<code>vector</code>,不太好写,因此一般会使用链式前向星(数组模拟邻接表)来实现。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> tot = <span class="number">1</span>,head[MAXN];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">	<span class="type">int</span> next,v,w;</span><br><span class="line">&#125;edge[MAXM&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> u,v,w)</span></span>&#123; <span class="comment">//加边</span></span><br><span class="line">	edge[tot].v = v;</span><br><span class="line">	edge[tot].w = w;</span><br><span class="line">	edge[tot].next = head[u];</span><br><span class="line">	head[u] = tot++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="0x14-Hash"><a href="#0x14-Hash" class="headerlink" title="0x14 Hash"></a>0x14 Hash</h4><ul>
<li><p>$Hash$表</p>
<ul>
<li>类似离散化的思想,使用$Hash$函数将若干复杂数值映射到一个容易维护的值域内,对于映射为相同值的冲突情况,建立一个邻接表,将映射为同一值的元素归为一类,每次插入新元素时,检测该元素是否存在,若不存在,则在表头插入该元素,期望复杂度$O(1)$。</li>
</ul>
</li>
<li><p>例题: 雪花雪花雪花</p>
<ul>
<li><p>对于两个不相同的雪花, 有$\sum\limits<em>{i = 1}^6a</em>{x,i}+\prod\limits<em>{i = 1}^6a</em>{x,i} = \sum\limits<em>{i = 1}^6a</em>{y,i}+\prod\limits<em>{i = 1}^6a</em>{y,i}$,用归纳法易证。</p>
<p>因此,我们可以定义一个哈希函数$H<em>x = (\sum\limits</em>{i = 1}^6a<em>{x,i}+\prod\limits</em>{i = 1}^6a_{x,i}) \bmod p$,其中,$p$取最接近$n$的质数时复杂度最优,每次插入新雪花时,判断是否有与其相同的雪花即可。对于随机数据,期望复杂度$O(\frac{n^2}{p})$</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a[MAXN][<span class="number">10</span>],n,head[MAXN],tot = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	<span class="type">int</span> cnt,next,id;</span><br><span class="line">&#125;h[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Equal</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> p1,p2;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">6</span>;j++)&#123;</span><br><span class="line">			<span class="type">bool</span> ep = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=<span class="number">5</span>;k++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(a[x][(i+k<span class="number">-1</span>)%<span class="number">6</span>+<span class="number">1</span>]!=a[y][(j+k<span class="number">-1</span>)%<span class="number">6</span>+<span class="number">1</span>]) ep = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(ep) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">			ep = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;=<span class="number">5</span>;k++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(a[x][(i+k<span class="number">-1</span>)%<span class="number">6</span>+<span class="number">1</span>]!=a[y][(j-k+<span class="number">6</span><span class="number">-1</span>)%<span class="number">6</span>+<span class="number">1</span>]) ep = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(ep) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Add</span><span class="params">(<span class="type">int</span> u,<span class="type">int</span> id)</span></span>&#123;</span><br><span class="line">	h[tot].cnt++;</span><br><span class="line">	h[tot].id = id;</span><br><span class="line">	h[tot].next = head[u];</span><br><span class="line">	head[u] = tot++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Hash</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> PAI = <span class="number">1</span>,SUM = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;i++)&#123;</span><br><span class="line">		SUM = (SUM+a[x][i])%P;</span><br><span class="line">		PAI = (<span class="type">long</span> <span class="type">long</span>)PAI*a[x][i]%P;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> u = (SUM+PAI)%P;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = head[u];i;i = h[i].next)&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">Equal</span>(h[i].id,x))&#123;</span><br><span class="line">			h[i].cnt++,b = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Add</span>(u,x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>字符串哈希</p>
<ul>
<li><p>取一固定值$P$,把字符串看作$P$进制数,并对于每种字符$c$,分配一个的对应的值$v_c(P&gt;v_c&gt;0)$。举例来说,若字符串$S$的映射值为$X$,则$S+c$的映射值就为$(X×P+v_c) \bmod M$</p>
<p>一般来说,取$P = 131$或$P = 13331$时起哈希冲突的概率最小。通常我们取$M = 2^{64}$,即直接使用<code>unsigned long long</code>类型对哈希值进行存储。这样可以避免低效的取模运算</p>
<p>若已知字符串S的哈希值为$H<em>S$,字符串$S+T$的哈希值为$H</em>{S+T}$,那么字符串$T$的哈希值就为$H_{S+T} - H_S×P^{length(T)}$,等价于在$P$进制下将$S$左移对齐$S+T$,两者相减即为$H_T$</p>
</li>
</ul>
</li>
<li><p>例题: 兔子与兔子</p>
<ul>
<li><p>模板题。用上述思想求解即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line"><span class="type">int</span> n,l1,r1,l2,r2;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> f[MAXN],p[MAXN],x,y;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;s;</span><br><span class="line">	s = <span class="string">&#x27; &#x27;</span>+s;</span><br><span class="line">	p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s.<span class="built_in">size</span>()<span class="number">-1</span>;i++)&#123;</span><br><span class="line">		f[i] = f[i<span class="number">-1</span>]*P+s[i]-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>;</span><br><span class="line">		p[i] = p[i<span class="number">-1</span>]*P;</span><br><span class="line">	&#125;</span><br><span class="line">	n = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		l1 = <span class="built_in">read</span>(),r1 = <span class="built_in">read</span>(),l2 = <span class="built_in">read</span>(),r2 = <span class="built_in">read</span>();</span><br><span class="line">		x = f[r1] - f[l1<span class="number">-1</span>]*p[r1-l1+<span class="number">1</span>],y = f[r2] - f[l2<span class="number">-1</span>]*p[r2-l2+<span class="number">1</span>];</span><br><span class="line">		<span class="keyword">if</span>(x==y)&#123;</span><br><span class="line">			<span class="built_in">puts</span>(<span class="string">&quot;Yes&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">puts</span>(<span class="string">&quot;No&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 回文子串的最大长度</p>
<ul>
<li><p>算法一: 对于每个字符$s_i$,使用二分+哈希求出其最大回文长度即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> s[MAXN];</span><br><span class="line"><span class="type">int</span> n,ans;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> a,b;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> pre[MAXN],last[MAXN],p[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> mid,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">	a = last[n-x+<span class="number">1</span>+mid] - last[n-x]*p[mid+<span class="number">1</span>];</span><br><span class="line">	b = pre[y+mid] - pre[y<span class="number">-1</span>]*p[mid+<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">if</span>(a==b) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cal</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> l = <span class="number">0</span>,r = <span class="built_in">min</span>(x<span class="number">-1</span>,n-y);</span><br><span class="line">	<span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">		<span class="type">int</span> mid = (l+r+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">check</span>(mid,x,y)) l = mid;</span><br><span class="line">		<span class="keyword">else</span> r = mid<span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ans = <span class="built_in">max</span>(ans,r*<span class="number">2</span>+(y-x+<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(cin&gt;&gt;(s+<span class="number">1</span>))&#123;</span><br><span class="line">		<span class="built_in">memset</span>(last,<span class="number">0</span>,<span class="built_in">sizeof</span>(last));</span><br><span class="line">		<span class="built_in">memset</span>(pre,<span class="number">0</span>,<span class="built_in">sizeof</span>(pre));</span><br><span class="line">		<span class="built_in">memset</span>(p,<span class="number">0</span>,<span class="built_in">sizeof</span>(p));</span><br><span class="line">		p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">		ans = <span class="number">1</span>;</span><br><span class="line">		n = <span class="built_in">strlen</span>(s+<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">if</span>(s[<span class="number">1</span>]==<span class="string">&#x27;E&#x27;</span>&amp;&amp;s[<span class="number">2</span>]==<span class="string">&#x27;N&#x27;</span>&amp;&amp;s[<span class="number">3</span>]==<span class="string">&#x27;D&#x27;</span>&amp;&amp;n==<span class="number">3</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			last[i] = last[i<span class="number">-1</span>]*P+(s[n-i+<span class="number">1</span>]-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>);</span><br><span class="line">			pre[i] = pre[i<span class="number">-1</span>]*P+(s[i]-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>);</span><br><span class="line">			p[i] = p[i<span class="number">-1</span>]*P;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(s[i]!=s[i<span class="number">-1</span>]) <span class="built_in">cal</span>(i,i);</span><br><span class="line">			<span class="keyword">else</span> <span class="built_in">cal</span>(i,i),<span class="built_in">cal</span>(i<span class="number">-1</span>,i);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Case %d: %d\n&quot;</span>,k,ans);</span><br><span class="line">		k++;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li>算法二: 见笔记 <a target="_blank" rel="noopener" href="https://xcxc82.github.io/2020/10/23/manacher%E7%AE%97%E6%B3%95/">manacher算法</a> (以后用空了真的想把这些学习笔记重构下,写的实在是太乱了。。)</li>
</ul>
<ul>
<li><p>例题: 后缀数组(SA)</p>
<ul>
<li><p>这里直接用快速排序进行字典排序会被卡成$n^2logn$,因此考虑使用二分+哈希,找到第一个字符不同的位置。复杂度$O(nlog^2n)$</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,SA[MAXN],height[MAXN];</span><br><span class="line"><span class="type">char</span> s[MAXN];</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> a,b;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> f[MAXN],p[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Check</span><span class="params">(<span class="type">int</span> mid,<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">	a = f[x+mid<span class="number">-1</span>]-f[x<span class="number">-1</span>]*p[mid];</span><br><span class="line">	b = f[y+mid<span class="number">-1</span>]-f[y<span class="number">-1</span>]*p[mid];</span><br><span class="line">	<span class="keyword">if</span>(a==b) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Cmp</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> l = <span class="number">0</span>,r = <span class="built_in">min</span>(n-a+<span class="number">1</span>,n-b+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">		<span class="type">int</span> mid = (l+r+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>; </span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">Check</span>(mid,a,b)) l = mid;</span><br><span class="line">		<span class="keyword">else</span> r = mid<span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> s[a+l]&lt;s[b+l];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Get_Height</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> l = <span class="number">0</span>,r = <span class="built_in">min</span>(n-a+<span class="number">1</span>,n-b+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">		<span class="type">int</span> mid = (l+r+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>; </span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">Check</span>(mid,a,b)) l = mid;</span><br><span class="line">		<span class="keyword">else</span> r = mid<span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;(s+<span class="number">1</span>);</span><br><span class="line">	n = <span class="built_in">strlen</span>(s+<span class="number">1</span>);</span><br><span class="line">	p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		SA[i] = i;</span><br><span class="line">		f[i] = f[i<span class="number">-1</span>]*P+(s[i]-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>);<span class="comment">//前i个字符的哈希值 </span></span><br><span class="line">		p[i] = p[i<span class="number">-1</span>]*P;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(SA+<span class="number">1</span>,SA+<span class="number">1</span>+n,Cmp);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,SA[i]<span class="number">-1</span>);</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		height[i] = <span class="built_in">Get_Height</span>(SA[i],SA[i<span class="number">-1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,height[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="0x15-字符串"><a href="#0x15-字符串" class="headerlink" title="0x15 字符串"></a>0x15 字符串</h4><ul>
<li>暂时略过。之后再补</li>
</ul>
<h4 id="0x16-Tire"><a href="#0x16-Tire" class="headerlink" title="0x16 Tire"></a>0x16 Tire</h4><h4 id="0x17-二叉堆"><a href="#0x17-二叉堆" class="headerlink" title="0x17 二叉堆"></a>0x17 二叉堆</h4><ul>
<li><p>例题: 超市</p>
<ul>
<li><p>带后悔的贪心。我们将每个商品按过期时间从大到小排序, 并开一个小根堆, 扫描每个商品:</p>
<p>若当前商品的过期日期大于当前商品个数(堆的大小),直接将该商品放入堆中</p>
<p>若当前商品的过期日期等于当前商品个数且当前商品的价值大于堆中最小的商品价值,则将该商品放入堆中</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">priority_queue&lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; q;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Item</span>&#123;</span><br><span class="line">	<span class="type">int</span> p,d;</span><br><span class="line">&#125;a[MAXN];</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Cmp</span><span class="params">(Item a,Item b)</span></span>&#123; </span><br><span class="line">	</span><br><span class="line">    <span class="built_in">sort</span>(a+<span class="number">1</span>,a+n+<span class="number">1</span>,Cmp);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i].d&gt;q.<span class="built_in">size</span>()) q.<span class="built_in">push</span>(a[i].p);</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(a[i].d==q.<span class="built_in">size</span>()&amp;&amp;a[i].p&gt;q.<span class="built_in">top</span>())&#123;</span><br><span class="line">				q.<span class="built_in">pop</span>(),q.<span class="built_in">push</span>(a[i].p);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(q.<span class="built_in">size</span>())&#123;</span><br><span class="line">			ans+=q.<span class="built_in">top</span>();</span><br><span class="line">			q.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 合并序列</p>
<ul>
<li><p>先来考虑只有两个序列时的简单情况, 先将两个序列$a$,$b$排序, 最小的值显然是$a<em>1+b_1$,次小值则为$min{a_1+b_2,a_2+b_1}$,假设$a_1+b_2$为次小值,那么第三小值即为$min{a_1+b_3,a_2+b_2,a_2+b_1}$,也就是说,当$a_i+b_j$成为第$k$小值后,$a</em>{i+1},b<em>j$和$a_i,b</em>{j+1}$便会加入第$k+1$小值的”备选队列”</p>
<p>对此,我们只需要开一个堆,储存一个三元组$(i,j,a<em>i+b_j)$,每次取出最小的$a_i+b_j$,再将$(i+1,j,a</em>{i+1}+b<em>j)$和$(i,j+1,a_i+b</em>{j+1})$插入堆中即可</p>
<p>对于$n$个序列的情况,我们只需要每次进行两两合并即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,m,T;</span><br><span class="line"><span class="type">int</span> a[MAXN],vis[MAXN][MAXN],ans[MAXN];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	<span class="type">int</span> i,j,val;	</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> Node &amp;a,<span class="type">const</span> Node &amp;b)&#123;</span><br><span class="line">		<span class="keyword">return</span> a.val&lt;b.val;</span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> res[MAXN];</span><br><span class="line">	res[<span class="number">1</span>] = ans[<span class="number">1</span>]+a[<span class="number">1</span>]; </span><br><span class="line">	Node b,c;</span><br><span class="line">	b.i = <span class="number">1</span>,b.j = <span class="number">2</span>,b.val = -(ans[b.i]+a[b.j]),q.<span class="built_in">push</span>(b);</span><br><span class="line">	b.i = <span class="number">2</span>,b.j = <span class="number">1</span>,b.val = -(ans[b.i]+a[b.j]),q.<span class="built_in">push</span>(b);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		res[i] = -q.<span class="built_in">top</span>().val;</span><br><span class="line">		b = q.<span class="built_in">top</span>(),q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="keyword">if</span>(!vis[b.i+<span class="number">1</span>][b.j])&#123;</span><br><span class="line">			c.i = b.i+<span class="number">1</span>,c.j = b.j,c.val = -(ans[b.i+<span class="number">1</span>]+a[b.j]),q.<span class="built_in">push</span>(c);</span><br><span class="line">			vis[b.i+<span class="number">1</span>][b.j] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(!vis[b.i][b.j+<span class="number">1</span>])&#123;</span><br><span class="line">			c.i = b.i,c.j = b.j+<span class="number">1</span>,c.val = -(ans[b.i]+a[b.j+<span class="number">1</span>]),q.<span class="built_in">push</span>(c);</span><br><span class="line">			vis[b.i][b.j+<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(q.<span class="built_in">size</span>()) q.<span class="built_in">pop</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		ans[i] = res[i];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	T = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		n = <span class="built_in">read</span>(),m = <span class="built_in">read</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) ans[i] = <span class="built_in">read</span>();</span><br><span class="line">		<span class="built_in">sort</span>(ans+<span class="number">1</span>,ans+<span class="number">1</span>+m);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			<span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++) a[j] = <span class="built_in">read</span>();</span><br><span class="line">			<span class="built_in">sort</span>(a+<span class="number">1</span>,a+m+<span class="number">1</span>);</span><br><span class="line">			<span class="built_in">merge</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,ans[i]);</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>例题: 数据备份</p>
<ul>
<li><p>解法1:</p>
<p>考虑动态规划。设$f_{i,j,0/1}$表示前$i$个数中,选了$j$个数,第$i$个数选了/没选时的最优解。转移比较显然,就不写了,再用滚动数组优化一下可以取得<del>75~95pts的高分</del>(看题解区的大佬说好像还可以用wqs二分优化? 不过没学过就是了= =)</p>
</li>
<li><p>解法2</p>
<p>很巧妙的找性质+带后悔贪心。首先考虑$k=1$时的情况,显然最小值即为所求解;</p>
<p>接着看$k=2$时的情况,当第$i$个数被选择时,第$i-1$和第$i+1$个数都无法被选择,因此如果不选择第$i$个数,则第$i+1$和第$i-1$和数要么都选上,要么都不选,否则直接选第$i$个数一定更优。也就是说,在最优解中,最小值左右两侧的值只能同时被选择。</p>
<p>因此,我们可以使用一个小根堆和链表来进行决策选择,每次选择都将小根堆中的最小值并入答案,同时在链表中删除该最小值对应的节点$p$和其左右两边的两个点,并在原位置插入一个新的”反悔”节点 , 使其权值等于$v<em>{p.next}+v</em>{p.prev} - v_p$,也就是说,如果后面某次操作中,选择了该节点,则说明对于全局来说,选择左右两个节点更优,相当于对之前的选择进行了一次”后悔” (好吧我承认自己也将不太清这种题型= =,得开个专题好好研究一下)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> head,tot,tail,val,ans;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	<span class="type">int</span> val,id;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> Node &amp;a,<span class="type">const</span> Node &amp;b)&#123;</span><br><span class="line">		<span class="keyword">return</span> a.val&gt;b.val;</span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Link_List</span>&#123;</span><br><span class="line">	<span class="type">int</span> prev,next,val;</span><br><span class="line">&#125;p[MAXN];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	head = <span class="number">1</span>,tail = <span class="number">2</span>;</span><br><span class="line">	p[head].val = p[tail].val = INF;</span><br><span class="line">	tot = <span class="number">2</span>;</span><br><span class="line">	p[head].next = tail,p[tail].prev = head;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">	p[++tot].val = val;</span><br><span class="line">	p[p[x].next].prev = tot;</span><br><span class="line">	p[tot].next = p[x].next;</span><br><span class="line">	p[tot].prev = x;</span><br><span class="line">	p[x].next = tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x==<span class="number">1</span>||x==<span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">	p[p[x].next].prev = p[x].prev;</span><br><span class="line">	p[p[x].prev].next = p[x].next; </span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n,k,a[MAXN],b[MAXN],vis[MAXN];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">init</span>();</span><br><span class="line">	n = <span class="built_in">read</span>(),k = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i] = <span class="built_in">read</span>();</span><br><span class="line">	<span class="built_in">sort</span>(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++) b[i] = a[i] - a[i<span class="number">-1</span>];</span><br><span class="line">	<span class="built_in">insert</span>(<span class="number">1</span>,b[<span class="number">2</span>]),q.<span class="built_in">push</span>(Node&#123;b[<span class="number">2</span>],<span class="number">3</span>&#125;);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">3</span>;i&lt;=n;i++) <span class="built_in">insert</span>(i,b[i]),q.<span class="built_in">push</span>(Node&#123;b[i],i+<span class="number">1</span>&#125;);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">		<span class="keyword">while</span>(q.<span class="built_in">size</span>()&amp;&amp;vis[q.<span class="built_in">top</span>().id]) q.<span class="built_in">pop</span>();</span><br><span class="line">		<span class="type">int</span> now = q.<span class="built_in">top</span>().id;</span><br><span class="line">		ans+=q.<span class="built_in">top</span>().val;</span><br><span class="line">		q.<span class="built_in">pop</span>();</span><br><span class="line">		val = p[p[now].next].val+p[p[now].prev].val-p[now].val;</span><br><span class="line">		vis[p[now].next] = <span class="number">1</span>,vis[p[now].prev] = <span class="number">1</span>;</span><br><span class="line">		<span class="built_in">del</span>(p[now].next),<span class="built_in">del</span>(p[now].prev);</span><br><span class="line">		p[now].val = val;</span><br><span class="line">		q.<span class="built_in">push</span>(Node&#123;val,now&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>哈夫曼(Huffman)树</p>
<ul>
<li><p>引入:</p>
<p>考虑这样一个问题,假设一颗$k$叉树有$n$个带权叶子节点,其中第$i$个叶子节点的值为$w<em>i$,到根节点的距离为$l_i$,现要求求出一种二叉树的构造方式,使得$\sum\limits</em>{i=1}^nw_il_i$最小化</p>
</li>
<li><p>解法($k=2$):</p>
<p>$\sum\limits_{i=1}^nw_il_i$最小的树被称为$k$叉$huffman$树(哈夫曼树)。一种比较直接的思路是$w$较大的节点放在较下面时最优,用反证法易证。当$k=2$时,其构造方式如下:</p>
<p>1.开一个小根堆,把所有的权值全部插入堆中</p>
<p>2.取出其中最小的两个值$w_1$和$w_2$</p>
<p>3.建立一个….并将其再次插入堆中</p>
<p>4.重复第步骤1~3,直到只剩最后一个值在堆中</p>
</li>
<li><p>解法($k&gt;2$)</p>
<p>一种比较直接的想法是把上述的”取最小的两个数”改成”取最小的$k$个数”,不过,仔细思考会发现,若最后一次取数时,堆的大小$&lt;k$,不足以取出$k$个,那么根节点的子节点数量将会小于$k$,这显然不是最优解,把下面任何一个叶子节点移上来,改为根的子节点都将更优</p>
<p>因此,我们需要在开始合并前,增加一些权值为$0$的节点,使得$(n-1) \bmod (k-1) = 0$(计算一下易证),这样,子节点不足$k$的情况就会发生在叶子节点处,而非根节点处</p>
</li>
</ul>
</li>
<li><p>例题: 荷马史诗</p>
<ul>
<li><p>首先有一个性质,如果把哈夫曼树看作一颗”trie树”,那么显然每个叶子节点代表的”单词”都是不同的,也就是说$k$叉哈夫曼树的构造方式就是本题的构造方式,因此,我们只需要构造出一颗$k$叉哈夫曼树即可。对于使最长的$s_i$最小的限制,只需要在每次合并时取长度,也就是合并次数最少节点合并即可</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ll n,k,val,cnt,res;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	ll val;</span><br><span class="line">	ll cnt;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> Node &amp;a,<span class="type">const</span> Node &amp;b)&#123;</span><br><span class="line">	<span class="keyword">if</span>(a.val==b.val) <span class="keyword">return</span> a.cnt&gt;b.cnt;   </span><br><span class="line">	<span class="keyword">return</span> a.val&gt;b.val;</span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br><span class="line">ll w[MAXN];</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	n = <span class="built_in">read</span>(),k = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) w[i] = <span class="built_in">read</span>(),q.<span class="built_in">push</span>(Node&#123;w[i],<span class="number">1</span>&#125;);</span><br><span class="line">	<span class="keyword">while</span>((n<span class="number">-1</span>)%(k<span class="number">-1</span>)!=<span class="number">0</span>)&#123;</span><br><span class="line">		w[++n] = <span class="number">0</span>;</span><br><span class="line">		q.<span class="built_in">push</span>(Node&#123;w[n],<span class="number">0</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(q.<span class="built_in">size</span>()!=<span class="number">1</span>)&#123;</span><br><span class="line">		val = <span class="number">0</span>,cnt = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=k;i++) val+=q.<span class="built_in">top</span>().val,cnt = <span class="built_in">max</span>(cnt,q.<span class="built_in">top</span>().cnt),q.<span class="built_in">pop</span>();</span><br><span class="line">		res = <span class="built_in">max</span>(res,cnt);</span><br><span class="line">		q.<span class="built_in">push</span>(Node&#123;val,cnt+<span class="number">1</span>&#125;);</span><br><span class="line">		ans+=val;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl&lt;&lt;res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h4 id="0x18-总结与练习"><a href="#0x18-总结与练习" class="headerlink" title="0x18 总结与练习"></a>0x18 总结与练习</h4><ul>
<li><p>括号画家</p>
<ul>
<li><p>解法挺多的,这边用的是普通的dp解法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line">pair&lt;<span class="type">char</span>,<span class="type">int</span>&gt; a[MAXN];</span><br><span class="line"><span class="type">int</span> ans,MAX[MAXN],top,last,now; </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;s;</span><br><span class="line">	s = <span class="string">&#x27; &#x27;</span>+s;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=s.<span class="built_in">length</span>()<span class="number">-1</span>;i++)&#123;</span><br><span class="line">		<span class="type">int</span> last = a[top].second;</span><br><span class="line">		<span class="keyword">if</span>(s[i]==<span class="string">&#x27;&#123;&#x27;</span>||s[i]==<span class="string">&#x27;(&#x27;</span>||s[i]==<span class="string">&#x27;[&#x27;</span>) a[++top] = <span class="built_in">make_pair</span>(s[i],i);</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[top].first==<span class="string">&#x27;&#123;&#x27;</span>&amp;&amp;s[i]==<span class="string">&#x27;&#125;&#x27;</span>) top--,MAX[i] = MAX[last<span class="number">-1</span>]+<span class="number">2</span>+MAX[i<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[top].first==<span class="string">&#x27;(&#x27;</span>&amp;&amp;s[i]==<span class="string">&#x27;)&#x27;</span>) top--,MAX[i] = MAX[last<span class="number">-1</span>]+<span class="number">2</span>+MAX[i<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(a[top].first==<span class="string">&#x27;[&#x27;</span>&amp;&amp;s[i]==<span class="string">&#x27;]&#x27;</span>) top--,MAX[i] = MAX[last<span class="number">-1</span>]+<span class="number">2</span>+MAX[i<span class="number">-1</span>];</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			top = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		ans = <span class="built_in">max</span>(ans,MAX[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>城市游戏</p>
<ul>
<li><p>记得之前自己第一次做这题的时候还是用一个听起来很nb的”悬线法dp”的方法来解的= =。实际上直接单调栈就行了,对每个点求其最高扩展距离,然后对每一行进行枚举即可。(OI wiki上的悬线法的介绍中也有写到”悬线法能解决的问题范围是单调栈的子集”)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="type">int</span> up[MAXN][MAXN],n,m;</span><br><span class="line"><span class="type">int</span> s[MAXN],top,w[MAXN],ans;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	n = <span class="built_in">read</span>(),m = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">			cin&gt;&gt;c;</span><br><span class="line">			<span class="keyword">if</span>(c==<span class="string">&#x27;F&#x27;</span>) up[i][j] = up[i<span class="number">-1</span>][j]+<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span> up[i][j] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">memset</span>(w,<span class="number">0</span>,<span class="built_in">sizeof</span>(w));</span><br><span class="line">		top = <span class="number">0</span>;</span><br><span class="line">		s[++top] = up[i][<span class="number">1</span>],w[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">2</span>;j&lt;=m+<span class="number">1</span>;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(up[i][j]&gt;=s[top]) s[++top] = up[i][j],w[top] = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> W = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">while</span>(s[top]&gt;up[i][j])&#123;</span><br><span class="line">					W+=w[top];</span><br><span class="line">					ans = <span class="built_in">max</span>(ans,W*s[top]);</span><br><span class="line">					top--;</span><br><span class="line">				&#125;</span><br><span class="line">				s[++top] = up[i][j],w[top] = W+<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;<span class="number">3</span>*ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>双栈排序</p>
<ul>
<li>随便写了个看起来就很假的贪心交了上去,取得了<del>30pts的好成绩</del>。正解似乎要用到二分图染色? <del>那等我复习完图论后再来补吧</del></li>
</ul>
</li>
<li><p>滑动窗口</p>
<ul>
<li><p>经典单调队列题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,m,a[MAXN],q[MAXN],l,r;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Get_Max</span><span class="params">()</span></span>&#123;</span><br><span class="line">	l = <span class="number">0</span>,r = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">while</span>(l&lt;=r&amp;&amp;q[l]&lt;=i-m) l++;</span><br><span class="line">		<span class="keyword">while</span>(l&lt;=r&amp;&amp;a[q[r]]&lt;a[i]) r--;</span><br><span class="line">		q[++r] = i;</span><br><span class="line">		<span class="keyword">if</span>(i&gt;=m) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[q[l]]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Get_Min</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">while</span>(l&lt;=r&amp;&amp;q[l]&lt;=i-m) l++;</span><br><span class="line">		<span class="keyword">while</span>(l&lt;=r&amp;&amp;a[q[r]]&gt;a[i]) r--;</span><br><span class="line">		q[++r] = i;</span><br><span class="line">		<span class="keyword">if</span>(i&gt;=m) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,a[q[l]]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;&quot;</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	n = <span class="built_in">read</span>(),m = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i] = <span class="built_in">read</span>();</span><br><span class="line">	<span class="built_in">Get_Min</span>();</span><br><span class="line">	<span class="built_in">Get_Max</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>内存分配</p>
<ul>
<li><p>毒瘤模拟题。。。坑点挺多的,这边用了官方题解里的vector模拟链表的写法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,t,m,p,ans,cnt,w;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Process</span>&#123;</span><br><span class="line">	<span class="type">int</span> l,r,t,p,len;</span><br><span class="line">	<span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> Process x) <span class="type">const</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> l &lt; x.l;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Process&gt; memory;</span><br><span class="line">queue&lt;Process&gt; wait_queue;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">work</span><span class="params">(Process x,<span class="type">int</span> t)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(memory.<span class="built_in">empty</span>()||memory[<span class="number">0</span>].l&gt;=x.len)&#123;</span><br><span class="line">		x.l = <span class="number">0</span>;</span><br><span class="line">		x.t = t;</span><br><span class="line">		x.r= x.l + x.len;</span><br><span class="line">		ans = <span class="built_in">max</span>(ans, x.t + x.p);</span><br><span class="line">		memory.<span class="built_in">push_back</span>(x);</span><br><span class="line">		<span class="built_in">sort</span>(memory.<span class="built_in">begin</span>(),memory.<span class="built_in">end</span>());</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> len = memory.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=len;i++)&#123;</span><br><span class="line">		ans = <span class="built_in">max</span>(ans, memory[i].t + memory[i].p);</span><br><span class="line">		<span class="keyword">if</span>(memory[i].l - memory[i<span class="number">-1</span>].r&gt;=x.len)&#123;</span><br><span class="line">			x.l = memory[i<span class="number">-1</span>].r;</span><br><span class="line">			x.r= x.l + x.len;</span><br><span class="line">			x.t = t;</span><br><span class="line">			memory.<span class="built_in">push_back</span>(x);</span><br><span class="line">			<span class="built_in">sort</span>(memory.<span class="built_in">begin</span>(),memory.<span class="built_in">end</span>());</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(n-memory[len].r&gt;=x.len)&#123;</span><br><span class="line">		x.l = memory[len].r;</span><br><span class="line">		x.r  = x.l + x.len;</span><br><span class="line">		x.t = t;</span><br><span class="line">		ans = <span class="built_in">max</span>(ans, x.t + x.p);</span><br><span class="line">		memory.<span class="built_in">push_back</span>(x);</span><br><span class="line">		<span class="built_in">sort</span>(memory.<span class="built_in">begin</span>(),memory.<span class="built_in">end</span>());</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">release</span><span class="params">(<span class="type">int</span> t)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> now = INF;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;memory.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(memory[i].t+memory[i].p&lt;=t) memory.<span class="built_in">erase</span>(memory.<span class="built_in">begin</span>()+i--);</span><br><span class="line">		<span class="keyword">else</span> now = <span class="built_in">min</span>(now,memory[i].p+memory[i].t);</span><br><span class="line">	&#125;</span><br><span class="line">	Process x;</span><br><span class="line">	<span class="keyword">while</span>(wait_queue.<span class="built_in">size</span>())&#123;</span><br><span class="line">		x = wait_queue.<span class="built_in">front</span>();</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">work</span>(x,w))&#123;</span><br><span class="line">			now = <span class="built_in">min</span>(now,wait_queue.<span class="built_in">front</span>().t + wait_queue.<span class="built_in">front</span>().p);</span><br><span class="line">			wait_queue.<span class="built_in">pop</span>();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	w = now;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">wait</span><span class="params">(Process x)</span></span>&#123;</span><br><span class="line">	cnt++;</span><br><span class="line">	wait_queue.<span class="built_in">push</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	w = INF;</span><br><span class="line">	n = <span class="built_in">read</span>();</span><br><span class="line">	Process x;</span><br><span class="line">	<span class="keyword">while</span>(cin&gt;&gt;t&gt;&gt;m&gt;&gt;p)&#123;</span><br><span class="line">		<span class="keyword">if</span>(!t&amp;&amp;!m&amp;&amp;!p) <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">while</span>(t&gt;=w) <span class="built_in">release</span>(w); <span class="comment">//注意这里不能一次删完(release(t)),题里说了只要一有空位就把队头插进去,要一次次的删 </span></span><br><span class="line">		x.t = t,x.len = m,x.p = p;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">work</span>(x,t))&#123;</span><br><span class="line">			w = <span class="built_in">min</span>(w,t+p);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">wait</span>(x);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(wait_queue.<span class="built_in">size</span>())&#123;</span><br><span class="line">		<span class="built_in">release</span>(w);</span><br><span class="line">	&#125;</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl&lt;&lt;cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>矩阵</p>
<ul>
<li><p>二维哈希。哈希本质上就是加权相加,因此我们可以把矩阵的每一列每一行像二维前缀和那样进行表示即可。另外题也是真的卡常= = 多写了三个循环就过不去了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> eq;</span><br><span class="line"><span class="type">int</span> n,m,a,b,q;</span><br><span class="line"><span class="type">int</span> ans[MAXN];</span><br><span class="line"><span class="type">char</span> s[MAXN],qs[MAXN][MAXN];</span><br><span class="line">ull A[MAXN][MAXN],B[MAXN][MAXN],p1[MAXN],p2[MAXN],x;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> j)</span></span>&#123;</span><br><span class="line">	x = A[i][j] - A[i-a][j]*p2[a] - A[i][j-b]*p1[b] + A[i-a][j-b]*p2[a]*p1[b];</span><br><span class="line">	<span class="keyword">if</span>(x==B[a][b]) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ull <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= a; i++) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, qs[i] + <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= b; j++)</span><br><span class="line">			B[i][j] = B[i][j<span class="number">-1</span>] * P1 + (qs[i][j]-<span class="string">&#x27;0&#x27;</span>+<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= a; i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= b; j++)</span><br><span class="line">			B[i][j] += B[i<span class="number">-1</span>][j] * P2;</span><br><span class="line">	<span class="keyword">return</span> B[a][b];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	p1[<span class="number">0</span>] = <span class="number">1</span>,p2[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;MAXN;i++) p1[i] = p1[i<span class="number">-1</span>]*P1;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;MAXN;i++) p2[i] = p2[i<span class="number">-1</span>]*P2; </span><br><span class="line">	n = <span class="built_in">read</span>(),m = <span class="built_in">read</span>(),a = <span class="built_in">read</span>(),b = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		cin&gt;&gt;(s+<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">			A[i][j] = A[i][j<span class="number">-1</span>]*P1+(s[j]-<span class="string">&#x27;0&#x27;</span>+<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">			A[i][j] = A[i<span class="number">-1</span>][j]*P2+A[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	q = <span class="built_in">read</span>();</span><br><span class="line">	map&lt;ull, vector&lt;<span class="type">int</span>&gt; &gt; qans;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++) qans[<span class="built_in">get</span>()].<span class="built_in">push_back</span>(i);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = a; i &lt;= m; i++)</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = b; j &lt;= n; j++) &#123;</span><br><span class="line">			ull k = A[i][j] - A[i-a][j]*p2[a] - A[i][j-b]*p1[b] + A[i-a][j-b]*p2[a]*p1[b];</span><br><span class="line">			<span class="keyword">if</span> (qans.<span class="built_in">find</span>(k) != qans.<span class="built_in">end</span>())</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; qans[k].<span class="built_in">size</span>(); i++)</span><br><span class="line">					ans[qans[k][i]] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= q; i++) cout &lt;&lt; (ans[i] ? <span class="string">&quot;1&quot;</span> : <span class="string">&quot;0&quot;</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>树形地铁系统</p>
</li>
<li><p>项链</p>
</li>
<li><p>奶牛矩阵</p>
</li>
<li><p>匹配统计</p>
<ul>
<li><p>hash水题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> a[MAXN],b[MAXN];</span><br><span class="line"><span class="type">int</span> n,m,q,x;</span><br><span class="line"><span class="type">int</span> buc[MAXN];</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> p[MAXN],f1[MAXN],f2[MAXN];</span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> <span class="title">Hash_A</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> f1[r] - f1[l<span class="number">-1</span>]*p[r-l+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span> <span class="title">Hash_B</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> f2[r] - f2[l<span class="number">-1</span>]*p[r-l+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Check</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> l = <span class="number">0</span>,r = <span class="built_in">min</span>(n-i+<span class="number">1</span>,m);</span><br><span class="line">	<span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">		<span class="type">int</span> mid = (l+r+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">Hash_A</span>(i,i+mid<span class="number">-1</span>)==<span class="built_in">Hash_B</span>(<span class="number">1</span>,mid)) l = mid;</span><br><span class="line">		<span class="keyword">else</span> r = mid<span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	buc[l]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin&gt;&gt;n&gt;&gt;m&gt;&gt;q;</span><br><span class="line">	p[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		cin&gt;&gt;a[i];</span><br><span class="line">		f1[i] = f1[i<span class="number">-1</span>]*P+(a[i]-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>);</span><br><span class="line">		p[i] = p[i<span class="number">-1</span>]*P;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">		cin&gt;&gt;b[i];</span><br><span class="line">		f2[i] = f2[i<span class="number">-1</span>]*P+(b[i]-<span class="string">&#x27;a&#x27;</span>+<span class="number">1</span>);</span><br><span class="line">		p[i] = p[i<span class="number">-1</span>]*P;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">Check</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">		x = <span class="built_in">read</span>();</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,buc[x]); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>电话列表</p>
<ul>
<li><p>trie水题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">string s[MAXN];</span><br><span class="line"><span class="type">bool</span> eq;</span><br><span class="line"><span class="type">int</span> trie[MAXN][<span class="number">12</span>],tot = <span class="number">1</span>,n,T;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">	<span class="type">bool</span> b = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> p = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;s.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">		<span class="type">int</span> x = s[i]-<span class="string">&#x27;0&#x27;</span>+<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(!trie[p][x]) b = <span class="number">0</span>,trie[p][x] = ++tot;</span><br><span class="line">		p = trie[p][x];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(b) eq = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Cmp</span><span class="params">(string a,string b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a.<span class="built_in">size</span>()&lt;b.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	T = <span class="built_in">raed</span>();</span><br><span class="line">	<span class="keyword">while</span>(T--)&#123;</span><br><span class="line">		tot = <span class="number">1</span>;</span><br><span class="line">		<span class="built_in">memset</span>(trie,<span class="number">0</span>,<span class="built_in">sizeof</span>(trie));</span><br><span class="line">		eq = <span class="number">1</span>;</span><br><span class="line">		n = <span class="built_in">raed</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">			cin&gt;&gt;s[i],s[i] = <span class="string">&#x27; &#x27;</span>+s[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">sort</span>(s+<span class="number">1</span>,s+n+<span class="number">1</span>,Cmp);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=n;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">			<span class="built_in">Insert</span>(s[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(eq) cout&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;endl;</span><br><span class="line">		<span class="keyword">else</span> cout&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;endl;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>黑盒子</p>
<ul>
<li><p>对顶堆水题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,m,a[MAXN],u[MAXN],now,p;</span><br><span class="line">priority_queue&lt;<span class="type">int</span>&gt; q2;</span><br><span class="line">priority_queue&lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; q1;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">	n = <span class="built_in">read</span>(),m = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++) a[i] = <span class="built_in">read</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=m;i++) p = <span class="built_in">read</span>(),u[p]++;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		q1.<span class="built_in">push</span>(a[i]);</span><br><span class="line">		<span class="keyword">if</span>(q2.<span class="built_in">size</span>()&amp;&amp;q2.<span class="built_in">top</span>()&gt;q1.<span class="built_in">top</span>())&#123;</span><br><span class="line">				<span class="type">int</span> a = q2.<span class="built_in">top</span>(),b = q1.<span class="built_in">top</span>();</span><br><span class="line">				q2.<span class="built_in">pop</span>(),q1.<span class="built_in">pop</span>();</span><br><span class="line">				q2.<span class="built_in">push</span>(b),q1.<span class="built_in">push</span>(a);</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="keyword">while</span>(u[i])&#123;</span><br><span class="line">			now++;</span><br><span class="line">			<span class="keyword">while</span>(now&gt;q2.<span class="built_in">size</span>()&amp;&amp;!q1.<span class="built_in">empty</span>())&#123;</span><br><span class="line">				q2.<span class="built_in">push</span>(q1.<span class="built_in">top</span>());</span><br><span class="line">				q1.<span class="built_in">pop</span>();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">while</span>(now&lt;q2.<span class="built_in">size</span>()&amp;&amp;!q2.<span class="built_in">empty</span>())&#123;</span><br><span class="line">				q1.<span class="built_in">push</span>(q2.<span class="built_in">top</span>());</span><br><span class="line">				q2.<span class="built_in">pop</span>();</span><br><span class="line">			&#125;</span><br><span class="line">			u[i]--;</span><br><span class="line">			cout&lt;&lt;q2.<span class="built_in">top</span>()&lt;&lt;endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>生日礼物</p>
<p>巧妙的性质转化问题。</p>
<p>显然一段全为正数和负数的区间肯定会被连续选择,因此我们可以把原序列划分为若干个正负交替的”区间”:</p>
<p>反着来考虑问题,假设现在有$k$段正数区间,如果$k≤m$,正数段不足$k$个,直接全部选上即可,反之,我们先将所有的正数段都选上,然后考虑如何减少段数,使得总段数$≤m$</p>
<p>减少区间数有两种做法: 1.删去一段正数 2.将负数段相邻的两段正数合并</p>
<p>我们可以模仿”数据备份”里的做法,开一个堆来储存我们的决策,同时插入”反悔”决策</p>
<p>决策1的反悔决策,即将其与左右两边的负数段合并而非删除自身,决策二的反悔决策,也就是删除其左右两边的正数而非合并两段数,这两个决策都等价于”数据备份”里的”将左右两个节点与自身合并”,因此,直接使用”数据备份”里的维护方法即可(感觉可能表达的不是很清楚? 以后会改 先这样吧qwq)</p>
<p>ps: 小坑点: 注意可能会出现a=0的情况</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n,m,a[MAXN],sum[MAXN],vis[MAXN],cnt = <span class="number">1</span>,tot,val,ans;</span><br><span class="line"><span class="type">int</span> pos;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a&gt;b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> head,tail;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">	<span class="type">int</span> val,id;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span> &lt;(<span class="type">const</span> Node &amp;a,<span class="type">const</span> Node &amp;b)&#123;</span><br><span class="line">		<span class="keyword">return</span> a.val&gt;b.val;</span><br><span class="line">&#125;</span><br><span class="line">priority_queue&lt;Node&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Link_List</span>&#123;</span><br><span class="line">	<span class="type">int</span> next,val,prev;</span><br><span class="line">&#125;p[MAXN];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</span><br><span class="line">	head = <span class="number">1</span>,tail = <span class="number">2</span>;</span><br><span class="line">	tot = <span class="number">2</span>;</span><br><span class="line">	p[head].val = p[tail].val = INF;</span><br><span class="line">	p[head].next = tail;</span><br><span class="line">	p[tail].prev = head;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">	p[++tot].val = val;</span><br><span class="line">	p[p[x].next].prev = tot;</span><br><span class="line">	p[tot].next = p[x].next;</span><br><span class="line">	p[tot].prev = x;</span><br><span class="line">	p[x].next = tot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Delete</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x==<span class="number">1</span>||x==<span class="number">2</span>) <span class="keyword">return</span>;</span><br><span class="line">	p[p[x].next].prev = p[x].prev;</span><br><span class="line">	p[p[x].prev].next = p[x].next; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">Init</span>();</span><br><span class="line">	n = <span class="built_in">read</span>(),m = <span class="built_in">read</span>();</span><br><span class="line">	a[<span class="number">1</span>] = <span class="built_in">read</span>(),sum[<span class="number">1</span>] = a[<span class="number">1</span>]; </span><br><span class="line">    <span class="type">int</span> last = a[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        a[i] = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">if</span> (a[i]==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[i]*last&lt;<span class="number">0</span>) sum[++cnt] = a[i];</span><br><span class="line">        <span class="keyword">else</span> sum[cnt]+=a[i];</span><br><span class="line">        last = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">if</span>(sum[cnt]&lt;<span class="number">0</span>) cnt--;</span><br><span class="line">	<span class="keyword">if</span>(sum[<span class="number">1</span>]&lt;<span class="number">0</span>)&#123;</span><br><span class="line">		cnt--;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++) sum[i] = sum[i+<span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(sum[<span class="number">1</span>]&gt;<span class="number">0</span>) ans+=sum[<span class="number">1</span>],<span class="built_in">Insert</span>(<span class="number">1</span>,sum[<span class="number">1</span>]),q.<span class="built_in">push</span>(Node&#123;sum[<span class="number">1</span>],<span class="number">3</span>&#125;),pos = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=cnt;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(sum[i]&gt;<span class="number">0</span>) ans+=sum[i],pos++;</span><br><span class="line">		<span class="keyword">else</span> sum[i] = -sum[i];</span><br><span class="line">		<span class="built_in">Insert</span>(i+<span class="number">1</span>,sum[i]),q.<span class="built_in">push</span>(Node&#123;sum[i],i+<span class="number">2</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(pos&lt;=m)&#123;</span><br><span class="line">		cout&lt;&lt;ans;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="type">int</span> del_cnt = pos - m;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=del_cnt;i++)&#123;</span><br><span class="line">			<span class="keyword">while</span>(q.<span class="built_in">size</span>()&amp;&amp;vis[q.<span class="built_in">top</span>().id]) q.<span class="built_in">pop</span>();</span><br><span class="line">			<span class="type">int</span> now = q.<span class="built_in">top</span>().id;</span><br><span class="line">			ans-=q.<span class="built_in">top</span>().val;</span><br><span class="line">			q.<span class="built_in">pop</span>();</span><br><span class="line">			vis[p[now].next] = <span class="number">1</span>,vis[p[now].prev] = <span class="number">1</span>;</span><br><span class="line">			val = p[p[now].next].val+p[p[now].prev].val-p[now].val;</span><br><span class="line">			<span class="built_in">Delete</span>(p[now].next),<span class="built_in">Delete</span>(p[now].prev);</span><br><span class="line">			p[now].val = val;</span><br><span class="line">			q.<span class="built_in">push</span>(Node&#123;val,now&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		cout&lt;&lt;ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://xcxc82.github.io/">xcxc82</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://xcxc82.github.io/2022/10/08/《算法竞赛进阶指南》第二章 读书笔记">https://xcxc82.github.io/2022/10/08/《算法竞赛进阶指南》第二章 读书笔记</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">xcxc82</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/gh/overtrue/share.js@master/dist/js/social-share.min.js" defer></script></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.luogu.com.cn/upload/image_hosting/9z8l8un7.png" onerror="this.onerror=null;this.src='/null'" alt="avatar"/></div><div class="author-info__name">xcxc82</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">89</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:1634925559@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/156510450" target="_blank" title="bilibili"><i class="fab fa-bilibili"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=3354291253&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x10-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">0x10 基本数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0x11-%E6%A0%88"><span class="toc-text">0x11 栈</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x12-%E9%98%9F%E5%88%97"><span class="toc-text">0x12 队列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x13-%E9%93%BE%E8%A1%A8%E4%B8%8E%E9%82%BB%E6%8E%A5%E8%A1%A8"><span class="toc-text">0x13 链表与邻接表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x14-Hash"><span class="toc-text">0x14 Hash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x15-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">0x15 字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x16-Tire"><span class="toc-text">0x16 Tire</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x17-%E4%BA%8C%E5%8F%89%E5%A0%86"><span class="toc-text">0x17 二叉堆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x18-%E6%80%BB%E7%BB%93%E4%B8%8E%E7%BB%83%E4%B9%A0"><span class="toc-text">0x18 总结与练习</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/02/2022-12-2%E5%B0%8F%E8%AE%B0/" title="2022/12/2小记">2022/12/2小记</a><time datetime="2022-12-02T14:46:59.000Z" title="发表于 2022-12-02 22:46:59">2022-12-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/26/%E6%A8%A1%E6%9D%BF%E5%BA%93/" title="模板库">模板库</a><time datetime="2022-11-26T04:44:35.000Z" title="发表于 2022-11-26 12:44:35">2022-11-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/17/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="《算法竞赛进阶指南》第五章 读书笔记">《算法竞赛进阶指南》第五章 读书笔记</a><time datetime="2022-11-17T04:01:50.000Z" title="发表于 2022-11-17 12:01:50">2022-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/16/sb%E4%BB%A3%E7%A0%81%E5%90%88%E9%9B%86/" title="sb代码合集">sb代码合集</a><time datetime="2022-11-16T07:41:05.000Z" title="发表于 2022-11-16 15:41:05">2022-11-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/10/26/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97%E3%80%8B%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" title="《算法竞赛进阶指南》第三章 读书笔记">《算法竞赛进阶指南》第三章 读书笔记</a><time datetime="2022-10-26T12:13:56.000Z" title="发表于 2022-10-26 20:13:56">2022-10-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By xcxc82</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="running-time"><script>setInterval(()=>{let create_time=Math.round(new Date('2022-06-30 00:00:00').getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadWaline () {
  function insertCSS () {
    const link = document.createElement("link")
    link.rel = "stylesheet"
    link.href = "https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.css"
    document.head.appendChild(link)
  }

  function initWaline () {
    const waline = Waline.init(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://xcxc82-hqnudc6tn-xcxc82.vercel.app/',
      pageview: true,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
    }, null))
  }

  if (typeof Waline === 'function') initWaline()
  else {
    insertCSS()
    getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.js').then(initWaline)
  }
}

if ('Waline' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script src="/js/weather.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://npm.elemecdn.com/hexo-butterfly-clock/lib/clock.min.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1ms');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("xcxc82-hqnudc6tn-xcxc82.vercel.app/api?xcxc82",['#e4dfd7', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'],'xcxc82')
    }
  </script><!-- hexo injector body_end end --></body></html>